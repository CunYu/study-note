### 常见IO模型

|名称|中文名称|
|:----|:----|
|blocking IO|阻塞IO|
|nonblocking IO|非阻塞IO|
|IO multiplexing|IO多路复用|
|signal driven IO|信号驱动IO|
|asynchronous IO|异步IO|

### 内核空间/用户空间

现代操作系统采用了虚拟存储器，其为了保证内核的安全稳定，其会将虚拟空间分为两部分，内核空间和用户空间。

内核空间是供内核使用的，用户空间是给用户程序使用的。

当用户应用需要读数据时，数据先要读取到内核空间中，然后再由内核空间传输给相应的应用。

当用户应用需要写数据时，数据先写到内核空间中，然后再由内核空间传输给相应的数据实体。

<img src="./计算机与网络/计算机基础/image/现代操作系统读写数据流程.png" alt="现代操作系统读写数据流程"/>

由上图可知，站在应用程序的角度上，应用程序读数据可以分为两个阶段，数据准备阶段，数据从内核空间传输到用户空间阶段。

数据准备阶段是指等待数据从数据实体传输到内核空间的过程。

### IO模型说明

<img src="./计算机与网络/计算机基础/image/IO模型.png" alt="IO模型"/>

##### 阻塞IO

发起读操作的线程在数据准备阶段会一直处于等待状态，不进行任何操作。

##### 非阻塞IO

发起读操作的线程会立即得到返回，然后再轮询CPU数据是否已准备好，在轮询的间隙中其可以执行其它的任务，当CPU将数据准备好时，将数据从内核空间传输到用户空间。

##### IO多路复用

IO多路复用通过select使一个线程去监视多个IO，每当其监视的IO CPU将数据准备好后，该监视线程会将数据从内核空间传输到用户空间，该模型下使用一个线程来处理多个IO，适用于处理大量耗时较短的IO。

##### 信号驱动IO

发起读操作的线程会立即得到返回，CPU将数据准备好时会发送一个信号告知发起读操作的线程，等待信号的过程中CPU可以执行其它的任务，发起读操作的线程收到信号后将数据从内核空间传输到用户空间。

##### 异步IO

发起读操作的线程会立即得到返回，其他操作就不需要发起读操作的线程处理了，当数据准备好并从内核空间传输到用户空间后会通知发起读操作的线程。