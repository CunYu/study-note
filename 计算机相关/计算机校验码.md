本文介绍了计算机校验码相关知识。内容仅供参考使用，有不足之处请及时指出，也欢迎大家交流探讨。

### 概述

在计算机中，校验码是用来检测传送的数据是否出错，有些校验码可以纠错。

### 合法/错误编码

* 合法编码

用于传送数据的编码。

* 错误编码

不允许在数据中出现的编码。

### 码距

俩个合法编码之间最小的二进制不同位。

例如，0和1的码距为1，00和11的码距为2。

### 奇偶校验码（Parity Codes）

在编码中增加一位校验位来使编码中1的个数为奇数（奇检验）或为偶数（偶检验）。

|原编码|奇检验|偶检验|
|:----:|:----:|:----:|
|0000|0000 1|0000 0|
|0001|0001 0|0001 1|

##### 常见的奇偶校验码

水平奇偶校验码，垂直奇偶校验码，水平垂直校验码。

### 海明码（Hamming Code）

在数据码之间的确定位置插入k个校验码，通过扩大码距来实现检查和纠错，其满足以下条件。

```
数据码位数 + 校验码位数 + 1 =< 2^校验码位数
```

##### 1001的海明码

* 1001的校验码位数位数

```
4 + k + 1 > 2^k
```

k的值最小为3

* 校验码的位置

校验码的位置为2的n次方，n从0开始，直到满足k - 1

```
2^0 = 1
2^1 = 2
2^2 = 4
```

* 数据码与校验码的位置

|位置|1|2|3|4|5|6|7|
|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|
|数据码|||1||0|0|1|
|校验码|C1|C2||C3|||||

* 判断位置由哪些校验码校验

由上图可知第1位由C1来校验，第2位由C2来校验，第4位由C3来校验。

```
3 = 2^0 + 2^1
5 = 2^0 + 2^2
6 = 2^1 + 2^2
7 = 2^0 + 2^1 + 2^2
```

由上可知第3位由C1和C2校验，第5位由C1和C3校验，第6位由C2和C3校验，第7位由C1，C2和C3校验。

* 汇总校验码校验位数

|校验码|校验位数|
|:----:|:----:|
|C1|1 3 5 7|
|C2|2 3 6 7|
|C3|4 5 6 7|

* 计算校验码的值

异或：相同为0，不同为1。

C1校验的位数对应值为1 0 1，1 xor 0 xor 1 = 0。
由上可知，C2为0，C3为1。

* 1001的海明值为

0011001

### 循环亢余校验码（Cyclic Redundancy Check, CRC）

CRC利用生成多项式为数据码生成校验码，编码长度为数据码位数加上校验码位数，校验码位数越长表名校验能力越强，CRC广泛应用于数据通信和磁介质存储系统中。

CRC又称为(n, k)码，n表示CRC码长度，k表示信息码长度，校验码为n - k。

格式为：数据码+校验码

##### 模2运算

CRC编码时，采用的是模2运算，模2运算时按位运算，不发生借位和进位。

##### CRC编码

原编码1000001，生成多项式x^3 + x + 1。

生成多项式对应的码为1011。

原始编码后面补000（生成多项式码位数 - 1）

* 模2运算（异或）

|1|0|0|0|0|0|1|0|0|0|
|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|:----:|
|1|0|1|1|||||||
|||1|1|0|0|||||
|||1|0|1|1|||||
||||1|1|1|1||||
||||1|0|1|1||||
|||||1|0|0|0|||
|||||1|0|1|1|||
|||||||1|1|0|0|
|||||||1|0|1|1|
||||||||1|1|1|

CRC编码为1000001 111。